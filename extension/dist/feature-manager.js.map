{"version":3,"file":"feature-manager.js","sources":["../src/feature-manager.js"],"sourcesContent":["import { log } from './features/logger.js';\r\nimport observe from './helpers/dom-observer.js';\r\n\r\nlet registeredFeatures = [];\r\n\r\nasync function add(id, observer, selector, bodyClass, callback = null) {\r\n\r\n    /* Registering the feature push all args */\r\n    registeredFeatures.push({ id, observer, selector, bodyClass, callback });\r\n\r\n    /* Feature filtering and running */\r\n\tconst options = JSON.parse(localStorage.getItem('iref_settings'));\r\n\r\n    let enabled = false;\r\n\r\n    // check if feature id is enabled in the options object\r\n    if ((options && options[id] === true) || id === 'settings-panel') {\r\n        log(`✅ Enabled feature: ${id}`);\r\n        enabled = true;\r\n    } else {\r\n        log(`❌ Disabled feature: ${id}`);\r\n    }\r\n\r\n    if (observer) {\r\n        observe(id, selector, bodyClass, callback, enabled);\r\n    } else {\r\n        if (callback) {\r\n            callback(enabled);\r\n        }\r\n    }\r\n\r\n    return;\r\n\r\n}\r\n\r\nasync function rerunAll() {\r\n    registeredFeatures.forEach(feature => {\r\n        registeredFeatures = registeredFeatures.filter((item) => item.id !== feature.id);\r\n        add(feature.id, feature.observer, feature.selector, feature.bodyClass, feature.callback);\r\n    });\r\n}\r\n\r\nconst features = {\r\n\tadd,\r\n\trerunAll\r\n};\r\n\r\nexport default features;"],"names":["registeredFeatures","add","id","observer","selector","bodyClass","callback","options","enabled","log","observe","rerunAll","feature","item","features"],"mappings":";;AAGA,IAAIA,IAAqB,CAAA;AAEzB,eAAeC,EAAIC,GAAIC,GAAUC,GAAUC,GAAWC,IAAW,MAAM;AAGnE,EAAAN,EAAmB,KAAK,EAAE,IAAAE,GAAI,UAAAC,GAAU,UAAAC,GAAU,WAAAC,GAAW,UAAAC,EAAQ,CAAE;AAG1E,QAAMC,IAAU,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC;AAE7D,MAAIC,IAAU;AAGd,EAAKD,KAAWA,EAAQL,CAAE,MAAM,MAASA,MAAO,oBAC5CO,EAAI,sBAAsBP,CAAE,EAAE,GAC9BM,IAAU,MAEVC,EAAI,uBAAuBP,CAAE,EAAE,GAG/BC,IACAO,EAAQR,GAAIE,GAAUC,GAAWC,GAAUE,CAAO,IAE9CF,KACAA,EAASE,CAAO;AAM5B;AAEA,eAAeG,IAAW;AACtB,EAAAX,EAAmB,QAAQ,CAAAY,MAAW;AAClC,IAAAZ,IAAqBA,EAAmB,OAAO,CAACa,MAASA,EAAK,OAAOD,EAAQ,EAAE,GAC/EX,EAAIW,EAAQ,IAAIA,EAAQ,UAAUA,EAAQ,UAAUA,EAAQ,WAAWA,EAAQ,QAAQ;AAAA,EAC/F,CAAK;AACL;AAEK,MAACE,IAAW;AAAA,EAChB,KAAAb;AAAA,EACA,UAAAU;AACD;"}