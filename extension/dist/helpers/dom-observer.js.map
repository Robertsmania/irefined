{"version":3,"file":"dom-observer.js","sources":["../../src/helpers/dom-observer.js"],"sourcesContent":["import { log } from '../features/logger.js';\r\nimport { elementExists } from 'select-dom';\r\n\r\nlet watch_list = [];\r\n\r\nsetInterval(() => {\r\n    for (var i = 0; i < watch_list.length; i++) {\r\n        let exists = elementExists(watch_list[i].selector);\r\n\r\n        if (exists && watch_list[i].enabled) {\r\n            if (document.body.classList.contains(watch_list[i].bodyClass)) {\r\n                continue;\r\n            }\r\n            log(`âœ¨ Found ${watch_list[i].selector} for feature ${watch_list[i].id}`);\r\n\r\n            document.body.classList.add(watch_list[i].bodyClass);\r\n\r\n            if (watch_list[i].callback) {\r\n                watch_list[i].callback();\r\n            }\r\n        } else {\r\n            if (!document.body.classList.contains(watch_list[i].bodyClass)) {\r\n                continue;\r\n            }\r\n            document.body.classList.remove(watch_list[i].bodyClass);\r\n            log(`ðŸ¥· Lost ${watch_list[i].selector} for feature ${watch_list[i].id}`);\r\n\r\n            if (watch_list[i].callback) {\r\n                watch_list[i].callback(false);\r\n            }\r\n        }\r\n    }\r\n}, 300);\r\n\r\nexport default function observe(id, selector, bodyClass, callback, enabled) {\r\n    watch_list = watch_list.filter((item) => item.id !== id);\r\n    watch_list.push({ id, selector, bodyClass, callback, enabled });\r\n}\r\n"],"names":["watch_list","i","elementExists","log","observe","id","selector","bodyClass","callback","enabled","item"],"mappings":";;AAGA,IAAIA,IAAa,CAAA;AAEjB,YAAY,MAAM;AACd,WAASC,IAAI,GAAGA,IAAID,EAAW,QAAQC;AAGnC,QAFaC,EAAcF,EAAWC,CAAC,EAAE,QAAQ,KAEnCD,EAAWC,CAAC,EAAE,SAAS;AACjC,UAAI,SAAS,KAAK,UAAU,SAASD,EAAWC,CAAC,EAAE,SAAS;AACxD;AAEJ,MAAAE,EAAI,WAAWH,EAAWC,CAAC,EAAE,QAAQ,gBAAgBD,EAAWC,CAAC,EAAE,EAAE,EAAE,GAEvE,SAAS,KAAK,UAAU,IAAID,EAAWC,CAAC,EAAE,SAAS,GAE/CD,EAAWC,CAAC,EAAE,YACdD,EAAWC,CAAC,EAAE;IAE9B,OAAe;AACH,UAAI,CAAC,SAAS,KAAK,UAAU,SAASD,EAAWC,CAAC,EAAE,SAAS;AACzD;AAEJ,eAAS,KAAK,UAAU,OAAOD,EAAWC,CAAC,EAAE,SAAS,GACtDE,EAAI,WAAWH,EAAWC,CAAC,EAAE,QAAQ,gBAAgBD,EAAWC,CAAC,EAAE,EAAE,EAAE,GAEnED,EAAWC,CAAC,EAAE,YACdD,EAAWC,CAAC,EAAE,SAAS,EAAK;AAAA,IAEnC;AAET,GAAG,GAAG;AAES,SAASG,EAAQC,GAAIC,GAAUC,GAAWC,GAAUC,GAAS;AACxE,EAAAT,IAAaA,EAAW,OAAO,CAACU,MAASA,EAAK,OAAOL,CAAE,GACvDL,EAAW,KAAK,EAAE,IAAAK,GAAI,UAAAC,GAAU,WAAAC,GAAW,UAAAC,GAAU,SAAAC,EAAO,CAAE;AAClE;"}