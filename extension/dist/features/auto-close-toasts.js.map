{"version":3,"file":"auto-close-toasts.js","sources":["../../src/features/auto-close-toasts.js"],"sourcesContent":["import { getFeatureID } from '../helpers/feature-helpers.js';\r\nimport features from '../feature-manager.js';\r\nimport { $ } from 'select-dom';\r\nimport { log } from './logger.js';\r\n\r\nconst selector = '.chakra-toast button[aria-label=\"Close\"]:not(.iref-seen)';\r\n\r\nasync function init(activate = true) {\r\n\r\n    if (!activate) {\r\n        return;\r\n    }\r\n\r\n    let timeout = JSON.parse(localStorage.getItem('iref_settings'))[\"toast-timeout-s\"] || 5;\r\n\r\n    let toastEl = $(selector);\r\n    \r\n    toastEl.classList.add('iref-seen');\r\n\r\n    log('✖️ Closing toast after ' + timeout + ' seconds');\r\n\r\n    setTimeout(() => {\r\n        let reactHandler = Object.keys(toastEl).find(key => key.startsWith('__reactEventHandlers'));\r\n        toastEl[reactHandler].onClick();\r\n    }, timeout * 1000);\r\n}\r\n\r\nconst id = getFeatureID(import.meta.url);\r\nconst bodyClass = 'iref-' + id;\r\n\r\nfeatures.add(id, true, selector, bodyClass, init);\r\n"],"names":["selector","init","activate","timeout","toastEl","$","log","reactHandler","key","id","getFeatureID","bodyClass","features"],"mappings":";;;;AAKA,MAAMA,IAAW;AAEjB,eAAeC,EAAKC,IAAW,IAAM;AAEjC,MAAI,CAACA;AACD;AAGJ,MAAIC,IAAU,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,EAAE,iBAAiB,KAAK,GAElFC,IAAUC,EAAEL,CAAQ;AAExB,EAAAI,EAAQ,UAAU,IAAI,WAAW,GAEjCE,EAAI,4BAA4BH,IAAU,UAAU,GAEpD,WAAW,MAAM;AACb,QAAII,IAAe,OAAO,KAAKH,CAAO,EAAE,KAAK,CAAAI,MAAOA,EAAI,WAAW,sBAAsB,CAAC;AAC1F,IAAAJ,EAAQG,CAAY,EAAE;EAC9B,GAAOJ,IAAU,GAAI;AACrB;AAEA,MAAMM,IAAKC,EAAa,YAAY,GAAG,GACjCC,IAAY,UAAUF;AAE5BG,EAAS,IAAIH,GAAI,IAAMT,GAAUW,GAAWV,CAAI;"}